<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <!-- bootstrap cdn-->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
      crossorigin="anonymous">
   <title>HangMan</title>
   <style>
      #solveForm {
         max-width: 100px;
      }

      button {
         margin: 5px;
      }

      .hangicon {
         width: 100px;
         height: auto;
      }

      h1 {
         font-size: 70px;
         text-align: center;
      }

      h2 {
         text-align: center;
         margin-top: 40px;
      }

      input {
         margin: 8px;
         max-width: 60px;
         border-radius: 4px;
         text-align: center;
         color: green;
         font-size: 18px;
         font-weight: bold;
      }



      #lettersDiv {
         display: flex;
         justify-content: center;
         margin-top: 60px;
      }
   </style>
</head>

<body>
   <div class="container">
      <div class="jumbotron">
         <h1>HangMan <img class="hangicon" src="assets/images/hangman.png" alt=""></h1>
         <p>Guess correctly or lose</p>
         <h3>Press any key to start the game or Press button on the screen</h3>
      </div>

      <div id="buttonkeysdiv" class="keybutton">
         <button class="keypress btn btn-primary">a</button>
         <button class="keypress btn btn-primary">b</button>
         <button class="keypress btn btn-primary">c</button>
         <button class="keypress btn btn-primary">d</button>
         <button class="keypress btn btn-primary">e</button>
         <button class="keypress btn btn-primary">f</button>
         <button class="keypress btn btn-primary">g</button>
         <button class="keypress btn btn-primary">h</button>
         <button class="keypress btn btn-primary">i</button>
         <button class="keypress btn btn-primary">j</button>
         <button class="keypress btn btn-primary">k</button>
         <button class="keypress btn btn-primary">l</button>
         <button class="keypress btn btn-primary">m</button>
         <button class="keypress btn btn-primary">n</button>
         <button class="keypress btn btn-primary">o</button>
         <button class="keypress btn btn-primary">p</button>
         <button class="keypress btn btn-primary">q</button>
         <button class="keypress btn btn-primary">r</button>
         <button class="keypress btn btn-primary">s</button>
         <button class="keypress btn btn-primary">t</button>
         <button class="keypress btn btn-primary">u</button>
         <button class="keypress btn btn-primary">v</button>
         <button class="keypress btn btn-primary">w</button>
         <button class="keypress btn btn-primary">x</button>
         <button class="keypress btn btn-primary">y</button>
         <button class="keypress btn btn-primary">x</button>
      </div>

      <!-- displays game question -->
      <h2 id="guess"></h2>

      <!-- displays generated letters -->
      <div id="lettersDiv"></div>
      
      <h4> Guesses remaining: </h4><div class="remainingGuesses"></div>
      <h4> Wins: </h4>
      <div class="numberOfWins"></div>
      <h4> Loses: </h4>
      <div class="numberOfLosses"></div>
      <button type="button" onclick="pullRandomWord()"></button>

      <!-- Restarts Game -->
      <button type="button" class="btn" value="New Game" onClick="window.location.reload()">Restart Game</button>
   </div>





   <!-- Start //////////////////////////////////////////////////////////////////////////Java Script -->
   <script>
      //selects random word;
      var score = 0;
      var numberOfWins = 0;
      var guessesleft = 10;
      var arrayWord = ["honda", "bmw", "audi", "mercedes"];
     
      // removes list items when a new game is generated
      function removeLi() {
         var liArray = document.querySelectorAll("input");
         if (liArray.length > 0) {
            var myNode = document.getElementById("lettersDiv");
            while (myNode.firstChild) {
               myNode.removeChild(myNode.firstChild);
            }
         }
      }


      function reEnableKeys(){
         var toBeEnable = document.getElementsByClassName("keypress");
         for (var i = 0; i < toBeEnable.length;i++){
            toBeEnable[i].disabled=false;

         }
      }


      // creates a random number and selects a random letter from array
      function pullRandomWord() {
         var randIndex = Math.random() * arrayWord.length;
         randIndex = Math.floor(randIndex);
         var randWord = arrayWord[randIndex];
         window.randWord = randWord;
         // TODO:call these functions when a new game is generated
         removeLi();
         guessword();
         reEnableKeys();
         
         // finds how many letters in a word and creates as many input fields
         for (var i = 0; i < randWord.length; i++) {
            myFunction();
         }
         disableIt();
      }


      // This function is used to generate the first game 
      do {
         pullRandomWord();
      } while (score < -1);


      // input field generator
      function myFunction() {
         var InputField = document.createElement("INPUT");
         // InputField.className = 'form-control';
         document.getElementById("lettersDiv").appendChild(InputField);
         
      }


      // asks to guess the word
      function guessword() {
         document.getElementById("guess").innerHTML = "Please guess a " + randWord.length + " letter word";
      }

     
     


      // detects button pressed and disables key
      // function findKey () {}
      document.addEventListener("keyup", (event) => {
         var x = event.key;
         console.log(x);
         var buttonArray = document.querySelectorAll(".keypress");
         // console.log(buttonArray);
         for (var i = 0; i < buttonArray.length; i++) {
            var foundLetter = buttonArray[i].innerHTML;
            if (foundLetter == x){ 
               buttonArray[i].disabled = true;
               searchWord(x);
            //    console.log( indexofbuttonArray[i].innerHTML);
            //  buttonArray[i].disabled = true;
            }
         }
      })


      // detects button pressed on keyboard on screen and disables key
      document.getElementById("buttonkeysdiv").addEventListener("click", (e) => {
         var pressedLetter = e.target.innerHTML;
         console.log(e.target);
         e.target.classList.remove("btn-primary");
         e.target.disabled = true;
         searchWord(pressedLetter);
      })


      // Search to see if letter is part of random word
      function searchWord(wasPressed) {
         console.log(randWord);
         if (randWord.includes(wasPressed)) {
            console.log("the letter " + wasPressed);
            //TODO:set function to add letter
            findLetterLocation(wasPressed);
         } else {
            console.log("can't find pressed valuse");
            //TODO:Write action for word not found.
         }
      }


      // This function finds the location of the existing word
      function findLetterLocation(pressedLocation) {
         for (var i = 0; i < randWord.length; i++) {
            if (randWord[i] == pressedLocation) {
               document.querySelectorAll("input")[i].value = pressedLocation;
               checkDone();
            }
         }
      }



// disables input buttons 
      function disableIt () {
            for (var i = 0; i < randWord.length; i++) {
                  document.querySelectorAll("input")[i].disabled = true;
                  console.log("im in the loop");

            }
      }

      // Adding to wins column 
      function checkDone () {
         
for (var i = 0; i < array.length; i++) {
   var element = array[i];
   
}

      }



   </script>
</body>

</html>